version: 2
jobs:
  build:
    docker:
      - image: circleci/node:current-browsers
    steps:
      - checkout
      - run:
          name: Install Dependencies
          command: npm install
      - run:
          name: Run ESLint
          command: npm run eslint
      - run:
          name: Run Tests
          command: npm test
      - run:
          name: Echo test
          command: echo test
      - run:
          name: Ignore non checked in files
          command: git checkout -- .
       - run:
       name: Show git tags
       command: git tag -l
      - run:
          name: Update NPM version
          command: npm version from-git --allow-same-version
      - run:
          name: Authenticate with registry
          command: node node_modules/npm-cli-login/bin/npm-cli-login.js -u ${NPM_USERNAME} -p ${NPM_PASSWORD} -e ${NPM_EMAIL}


workflows:
  version: 2
  deploy:
    jobs:
      - build:
          filters:
            tags:
              only: /.*/
            branches:
              ignore: /.*/
